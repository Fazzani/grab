language: generic
install: skip
cache: false
services:
  - docker
git:
  depth: 5
branches:
  only:
  - master
if: (commit_message =~ ^daily OR type = "cron") AND (branch = master)
env:
  - WEBGRAB_FILENAME=configs/ar_osn7.xml
  - WEBGRAB_FILENAME=configs/ar_osn8.xml
  - WEBGRAB_FILENAME=configs/ar_osn9.xml
  - WEBGRAB_FILENAME=configs/ar_osn10.xml
  - WEBGRAB_FILENAME=configs/ar_osn11.xml
  - WEBGRAB_FILENAME=configs/ar_osn12.xml
  - WEBGRAB_FILENAME=configs/ar_osn13.xml
script:
- chmod +x ./scripts/build.sh && ./scripts/build.sh --build

jobs:
  include:
  - stage: merging
    name: Merging xmltv files
    script: |
      chmod +x ./scripts/build.sh && ./scripts/build.sh --merge

notifications:
  email:
    recipients:
      - tunisienheni@gmail.com
    on_success: change
    on_failure: change
